"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),PropTypes=_interopDefault(require("prop-types")),__assign=function(){return(__assign=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function styleInject(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var css='@import url("https://fonts.googleapis.com/css?family=Source+Code+Pro&display=swap");\n#index_terminalContainer__3q4m3 {\n  --prompt-color: #a917a8;\n  --light-theme-bg-color: #fdf6e4;\n  --dark-theme-bg-color: #022833;\n  --light-theme-toolbar-color: #d8d8d8;\n  --dark-theme-toolbar-color: #131519;\n  --light-theme-color: #333333;\n  --dark-theme-color: #839496;\n  --light-theme-anchor-color: #1a87b5;\n  --dark-theme-anchor-color: #ffffff;\n  --control-default-bg-color: #ccc;\n  --control-close-bg-color: #fc5b57;\n  --control-minimize-bg-color: #e5bf3c;\n  --control-maximize-bg-color: #57c038; }\n\n.index_controls__9z-dM {\n  text-align: left;\n  height: 26px;\n  position: relative;\n  top: 4px;\n  margin-left: 4px; }\n  .index_controls__9z-dM .index_consoleCtrl__PQnAL {\n    display: inline-block;\n    width: 13px;\n    height: 13px;\n    margin: 0 3px;\n    border-radius: 50%;\n    background: var(--control-default-bg-color); }\n  .index_controls__9z-dM .index_close__2o6CK {\n    background: var(--control-close-bg-color); }\n  .index_controls__9z-dM .index_minimize__E9mwB {\n    background: var(--control-minimize-bg-color); }\n  .index_controls__9z-dM .index_maximize__sbbYF {\n    background: var(--control-maximize-bg-color); }\n\n.index_editor__2tqRz {\n  text-align: left;\n  height: calc(100% - 46px);\n  padding: 10px 15px;\n  overflow-wrap: break-word;\n  overflow-y: scroll;\n  outline: none;\n  font-family: "Source Code Pro", monospace;\n  background: var(--light-theme-bg-color);\n  font-size: 18px;\n  line-height: 22px;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px; }\n  .index_theme--light__15c4Z .index_editor__2tqRz {\n    background: var(--light-theme-bg-color); }\n  .index_theme--dark__1YsDI .index_editor__2tqRz {\n    background: var(--dark-theme-bg-color); }\n  .index_editor__2tqRz .index_editArea__1Y6QT {\n    display: inline-block;\n    width: 94%;\n    height: 20px;\n    outline: none;\n    border: none;\n    background: inherit;\n    color: transparent;\n    text-shadow: 0 0 0 var(--light-theme-color);\n    font-size: 18px;\n    line-height: 20px;\n    white-space: nowrap; }\n    .index_theme--light__15c4Z .index_editor__2tqRz .index_editArea__1Y6QT {\n      text-shadow: 0 0 0 var(--light-theme-color); }\n    .index_theme--dark__1YsDI .index_editor__2tqRz .index_editArea__1Y6QT {\n      text-shadow: 0 0 0 var(--dark-theme-color); }\n    .index_editor__2tqRz .index_editArea__1Y6QT br {\n      display: none; }\n  .index_editor__2tqRz .index_prompt__2NwNP {\n    color: var(--prompt-color); }\n  .index_editor__2tqRz .index_lineText__2Poex {\n    display: inline;\n    position: relative;\n    top: -1px;\n    margin-left: 8px; }\n  .index_editor__2tqRz .index_preWhiteSpace__3nCT2 {\n    white-space: pre; }\n  .index_editor__2tqRz .index_caret__MYxcn {\n    position: relative;\n    -webkit-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -moz-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -o-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -ms-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    animation: index_blink__RQDX- 0.75s ease-in-out infinite; }\n    .index_editor__2tqRz .index_caret__MYxcn .index_caretAfter__2B8sk {\n      content: "";\n      position: absolute;\n      top: 2px;\n      width: 10px;\n      height: 22px;\n      background: var(--light-theme-color);\n      z-index: 10; }\n      .index_theme--light__15c4Z .index_editor__2tqRz .index_caret__MYxcn .index_caretAfter__2B8sk {\n        background: var(--light-theme-color); }\n      .index_theme--dark__1YsDI .index_editor__2tqRz .index_caret__MYxcn .index_caretAfter__2B8sk {\n        background: var(--dark-theme-color); }\n\n@-moz-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@-webkit-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@-o-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n  .index_editor__2tqRz a {\n    color: var(--light-theme-anchor-color); }\n    .index_theme--light__15c4Z .index_editor__2tqRz a {\n      color: var(--light-theme-anchor-colo) r; }\n    .index_theme--dark__1YsDI .index_editor__2tqRz a {\n      color: var(--dark-theme-anchor-colo) r; }\n\n#index_terminalContainer__3q4m3 {\n  height: 100%; }\n\n.index_terminal__1dSq1 {\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  border-radius: 5px;\n  color: var(--light-theme-color);\n  background: var(--light-theme-toolbar-color); }\n  .index_theme--light__15c4Z .index_terminal__1dSq1 {\n    color: var(--light-theme-color);\n    background: var(--light-theme-toolbar-color); }\n  .index_theme--dark__1YsDI .index_terminal__1dSq1 {\n    color: var(--dark-theme-color);\n    background: var(--dark-theme-toolbar-color); }\n',index={terminalContainer:"index_terminalContainer__3q4m3",controls:"index_controls__9z-dM",consoleCtrl:"index_consoleCtrl__PQnAL",close:"index_close__2o6CK",minimize:"index_minimize__E9mwB",maximize:"index_maximize__sbbYF",editor:"index_editor__2tqRz","theme--light":"index_theme--light__15c4Z","theme--dark":"index_theme--dark__1YsDI",editArea:"index_editArea__1Y6QT",prompt:"index_prompt__2NwNP",lineText:"index_lineText__2Poex",preWhiteSpace:"index_preWhiteSpace__3nCT2",caret:"index_caret__MYxcn",blink:"index_blink__RQDX-",caretAfter:"index_caretAfter__2B8sk",terminal:"index_terminal__1dSq1"};styleInject(css);var styles=index,StyleContext=React.createContext(null),StyleContextProvider=function(e){var n=e.children;return React.createElement(StyleContext.Provider,{value:styles},n)},useClickOutsideEvent=function(e,n){var t=function(t){e.current&&!e.current.contains(t.target)?n(!1):n(!0)};React.useEffect((function(){return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}))};function Controls(e){var n=React.useContext(StyleContext),t=e.controlButtonLabels,o=e.showControlButtons?t.map((function(e){return React.createElement("div",{key:e,className:n.consoleCtrl+" "+n[e]})})):null;return React.createElement("div",{className:n.controls},o)}var TerminalContext=React.createContext(null),TerminalContextProvider=function(e){var n=e.children,t=React.useState(""),o=t[0],r=t[1];return React.createElement(TerminalContext.Provider,{value:[o,r]},n)},useEditorInput=function(e,n,t,o){var r=function(r){if(e)if(r.preventDefault(),"Enter"!==r.key){var i=null;i="Backspace"===r.key?n.slice(0,-1):r.key&&1===r.key.length?n+r.key:n,t(i),o(!1)}else o(!0)};React.useEffect((function(){return document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}))},useCurrentLine=function(e,n){var t=React.useContext(StyleContext),o=React.useState(""),r=o[0],i=o[1],a=React.useState(!1),l=a[0],c=a[1];return useEditorInput(e,r,i,c),[React.createElement(React.Fragment,null,React.createElement("span",{className:t.prompt},n),React.createElement("div",{className:t.lineText},React.createElement("span",{className:t.preWhiteSpace},r),e?React.createElement("span",{className:t.caret},React.createElement("span",{className:t.caretAfter})):null)),r,i,l,c]},useBufferedContent=function(e,n,t,o,r,i,a,l,c){var s=React.useContext(StyleContext);React.useEffect((function(){if(e){var d=o.trim().split(" "),_=d[0],m=d.slice(1),p="";if(o){var u=m.join(" ");if(_&&l[_]){var x=l[_];p="function"==typeof x?x(u):x}else p="function"==typeof c?c(u):c}var f=React.createElement(React.Fragment,null,i,React.createElement("span",{className:s.prompt},t),React.createElement("span",{className:s.lineText+" "+s.preWhiteSpace},o),p?React.createElement("span",null,React.createElement("br",null),p):null,React.createElement("br",null));a(f),n(!1),r("")}}),[e])},useScrollToBottom=function(e,n){React.useEffect((function(){n.current.scrollTop=n.current.scrollHeight}),[e])};function Editor(e){var n=React.useRef(null),t=React.useContext(StyleContext),o=React.useContext(TerminalContext),r=o[0],i=o[1],a=e.consoleFocused,l=e.prompt,c=e.commands,s=e.welcomeMessage,d=e.errorMessage,_=useCurrentLine(a,l),m=_[0],p=_[1],u=_[2],x=_[3],f=_[4];return useBufferedContent(x,f,l,p,u,r,i,c,d),useScrollToBottom(r,n),React.createElement("div",{ref:n,className:t.editor},s,r,m)}function Terminal(e){var n=React.useRef(null),t=React.useState(!0),o=t[0],r=t[1],i=React.useContext(StyleContext);useClickOutsideEvent(n,r);var a=e.theme,l=e.showControlButtons,c=e.controlButtonLabels,s=e.prompt,d=e.commands,_=e.welcomeMessage,m=e.errorMessage;return React.createElement("div",{ref:n,id:i.terminalContainer,className:i["theme--"+a]},React.createElement("div",{className:""+i.terminal},React.createElement(Controls,{consoleFocused:o,showControlButtons:l,controlButtonLabels:c}),React.createElement(Editor,{consoleFocused:o,prompt:s,commands:d,welcomeMessage:_,errorMessage:m})))}function ContextProvider(e){var n=e.children;return React.createElement(StyleContextProvider,null,n)}function ReactTerminal(e){return React.createElement(ContextProvider,null,React.createElement(Terminal,__assign({},e)))}Terminal.propTypes={theme:PropTypes.string,showControlButtons:PropTypes.bool,controlButtonLabels:PropTypes.arrayOf(PropTypes.string),prompt:PropTypes.string,commands:PropTypes.objectOf(PropTypes.oneOfType([PropTypes.string,PropTypes.func,PropTypes.node])),welcomeMessage:PropTypes.oneOfType([PropTypes.string,PropTypes.func,PropTypes.node]),errorMessage:PropTypes.string},Terminal.defaultProps={theme:"light",showControlButtons:!0,controlButtonLabels:["close","minimize","maximize"],prompt:">>>",commands:{},welcomeMessage:"",errorMessage:"not found!"};var TerminalContextProvider$1=TerminalContextProvider,index$1={ReactTerminal:ReactTerminal,TerminalContextProvider:TerminalContextProvider$1};exports.ReactTerminal=ReactTerminal,exports.TerminalContextProvider=TerminalContextProvider$1,exports.default=index$1;
